Version 4
SHEET 1 1960 1620
WIRE -16 912 -96 912
WIRE 128 912 48 912
WIRE 272 912 208 912
WIRE 272 1040 272 912
WIRE 272 1040 96 1040
WIRE 320 1040 272 1040
WIRE 528 1040 400 1040
WIRE -176 1056 -416 1056
WIRE -96 1056 -96 912
WIRE -96 1056 -176 1056
WIRE 32 1056 -96 1056
WIRE 208 1072 96 1072
WIRE 528 1072 528 1040
WIRE -416 1104 -416 1056
WIRE 208 1184 208 1072
WIRE 528 1216 528 1152
WIRE -416 1280 -416 1184
WIRE -256 1280 -416 1280
WIRE 0 1280 -160 1280
WIRE 80 1280 0 1280
WIRE -416 1312 -416 1280
WIRE -160 1312 -160 1280
WIRE -256 1328 -256 1280
WIRE -208 1328 -256 1328
WIRE -208 1376 -256 1376
WIRE -416 1472 -416 1392
WIRE -256 1472 -256 1376
WIRE -160 1472 -160 1392
FLAG 528 1216 0
FLAG -176 1056 reg
FLAG 208 1184 0
FLAG -416 1472 0
FLAG -256 1472 0
FLAG -160 1472 0
FLAG 0 1280 out
SYMBOL MyOpamp 64 1056 R180
WINDOW 39 0 -52 Center 2
WINDOW 40 -15 -77 Center 2
WINDOW 0 59 -22 Left 2
WINDOW 38 6 31 Left 2
SYMATTR InstName U1
SYMBOL cap 48 896 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 224 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 416 1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL voltage 528 1056 R0
WINDOW 123 25 103 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 44 Left 2
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMATTR InstName Vin
SYMBOL ind -400 1200 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1
SYMATTR Value 10m
SYMBOL res -432 1296 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL e -160 1296 R0
SYMATTR InstName E1
SYMATTR Value -10
TEXT -496 888 Left 2 !.ac dec 101 0.1 10meg
TEXT -496 1000 Left 2 ;Plant G(s)
TEXT 8 808 Left 2 ;Compensator C(s)
TEXT -288 1528 Left 2 ;Current sensor H(s)\n(sign used to compensate negative gain of C(s))
TEXT -16 1296 Left 2 ;Loop gain output \nC(s)*G(s)*H(s)
RECTANGLE Normal -352 1424 -496 1024 2
RECTANGLE Normal 432 1216 -128 832 2
RECTANGLE Normal -48 1504 -288 1248 2
